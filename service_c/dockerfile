# 1. ใช้ Python version ที่เบาและเสถียร
FROM python:3.9-slim

# 2. ตั้งค่าโฟลเดอร์ทำงานใน Container
WORKDIR /app

# 3. คัดลอกไฟล์ requirements.txt จากจุดนอกสุด (Root Context) เข้ามา
# หมายเหตุ: ถ้าในเครื่องคุณสะกดว่า requirments.txt (ไม่มี e) ให้แก้บรรทัดนี้ตามชื่อนั้นครับ
COPY requirements.txt .

# 4. ติดตั้ง Library ต่างๆ
RUN pip install --no-cache-dir -r requirements.txt

# 5. คัดลอกเฉพาะไฟล์ในโฟลเดอร์ service_c เข้ามาที่ /app ใน Container
COPY service_c/ .

# 6. คำสั่งรัน FastAPI ด้วย uvicorn
# --host 0.0.0.0 เพื่อให้ Docker ติดต่อกับโลกภายนอกได้
# --port 8000 คือพอร์ตที่รันภายใน Container
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]